//import("lib/Dump.scandal")
import("lib/Line.scandal")

// Fade out of an audio buffer.
lambda fadeOut = array x -> int samples -> {
	array fade = line([1, 0], samples)
	array buffer = new(size(x))
	int i = 0
	int j = 0
	while i < size(x) {
		buffer[i] = x[i]
		if i >= size(x) - samples {
			buffer[i] = buffer[i] * fade[j]
			j = j + 1
		}
		i = i + 1
	}
	return buffer
}

//array fadeOutTest = fadeOut([4, 4, 4, 4, 4], 3)
//fadeOutTest = dump(fadeOutTest)